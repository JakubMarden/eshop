/**
 * Copyright VIZUS.CZ s.r.o.
 */

tinymce.PluginManager.add('vizus_link', function(editor, url)
{
	function createDialog()
	{
		var url = vizus.url.replace(document.location.toString(), {query: {cmd: 'cms:editor.tinymce.plugins.link'}});
		vizus.cms.dialog.open(url, 0, 0, null, {editor: editor});
	}
	
	tinymce.util.I18n.add('cs',
	{
		'Insert/edit link': 'Vložit/změnit odkaz',
		'Insert link': 'Vložit odkaz',
	});

	editor.addButton('vizus_link',
	{
		icon: 'link',
		tooltip: 'Insert/edit link',
		shortcut: 'Ctrl+K',
		onclick: createDialog,
		stateSelector: 'a[href]'
	});
	
	editor.addShortcut('Ctrl+K', '', createDialog);

	editor.addMenuItem('vizus_link',
	{
		icon: 'link',
		text: 'Insert link',
		shortcut: 'Ctrl+K',
		onclick: createDialog,
		context: 'insert',
		prependToContext: true,
		stateSelector: 'a[href]'
	});
});
