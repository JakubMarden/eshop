if(Array.prototype.indexOf==undefined){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]===b){return a}}return -1}}if(Array.prototype.isArray==undefined){Array.prototype.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}}if(String.prototype.trim==undefined){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(document.head==undefined){document.head=document.getElementsByTagName("HEAD")[0]}document.createElement("video");document.createElement("audio");document.createElement("track");if(vizus==undefined){var vizus={}}vizus.Error=function(a){this.name="vizus.Error";this.message=a;if(vizus.config.debug){this.message+="\n"+vizus.debug.source(1)+"\n"+vizus.debug.backtrace(1)}};vizus.Error.prototype=new Error;vizus.ReferenceError=function(a){this.name="vizus.ReferenceError";this.message=a;if(vizus.config.debug){this.message+="\n"+vizus.debug.source(1)+"\n"+vizus.debug.backtrace(1)}};vizus.ReferenceError.prototype=new ReferenceError;vizus.ArgumentError=function(a){this.name="vizus.ArgumentError";this.message=a;if(vizus.config.debug){this.message+="\n"+vizus.debug.source(1)+"\n"+vizus.debug.backtrace(1)}};vizus.ArgumentError.prototype=new Error;vizus.getClass=function(b){var a=Object.prototype.toString.call(b);switch(a){case"[object Window]":case"[object global]":return"Window";case"[object Object]":if(typeof b=="undefined"){return"Undefined"}if(b instanceof Window){return"Window"}if(b===b.self){return"Window"}}return a.match(/object (\w+)/)[1]};vizus.getClasses=function(a){var b=[Object.prototype.toString.call(a).match(/object (\w+)/)[1]];if(a.__proto__){b=b.concat(vizus.getClasses(a.__proto__))}return b};vizus.isClassOf=function(c,b){var a=Object.prototype.toString.call(c).match(/object (\w+)/)[1];switch(a){case"Window":case"global":a="Window";case"Object":if(c instanceof Window){a="Window"}else{if(c===c.self){a="Window"}}}switch(Object.prototype.toString.call(b)){case"[object String]":return b==a;case"[object Array]":return b.indexOf(a)!=-1;case"[object RegExp]":return b.test(a);default:return false}};vizus.Argument=function(b,a){if(typeof a!="string"||a==""){throw new vizus.ArgumentError("Parametr 'name' musí obsahovat název parametru")}this.argValue=b;this.argName=a;this.argClass=vizus.getClass(b)};vizus.Argument.prototype.type=function(a){switch(Object.prototype.toString.call(a)){case"[object String]":if(a==this.argClass){return this}break;case"[object Array]":if(a.indexOf(this.argClass)!=-1){return this}break;case"[object RegExp]":if(a.test(this.argClass)){return this}break;default:throw new vizus.ArgumentError("Neplatná hodnota 'type'")}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' musí být typu {1}, ale je typu {2}",[this.argName,vizus.debug.dump(a),this.argClass]))};vizus.Argument.prototype.min=function(a){if(typeof a!="number"||!isFinite(a)){throw new vizus.ArgumentError("Neplatná hodnota 'min'")}switch(this.argClass){case"String":if(this.argValue.length>=a){return this}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' musí být minimálně {1} {2} dlouhý, ale je {3}",[this.argName,a,vizus.text.plural(a,"znak","znaky","znaků"),this.argValue.length]));case"Array":if(this.argValue.length>=a){return this}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' musí mít minimálně {1} {2}, ale má {3}",[this.argName,a,vizus.text.plural(a,"prvek","prvky","prvků"),this.argValue.length]));case"Number":if(isFinite(this.argValue)&&this.argValue>=a){return this}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' musí být číslo větší nebo rovno {1}, ale hodnota je {2}",[this.argName,a,this.argValue]));default:return this}};vizus.Argument.prototype.max=function(a){if(typeof a!="number"||!isFinite(a)){throw new vizus.ArgumentError("Neplatná hodnota max")}switch(this.argClass){case"String":if(this.argValue.length<=a){return this}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' může být maximálně {1} {2} dlouhý, ale má {3}",[this.argName,a,vizus.text.plural(a,"znak","znaky","znaků"),this.argValue.length]));case"Array":if(this.argValue.length<=a){return this}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' může mít maximálně {1} {2}, ale má {3}",[this.argName,a,vizus.text.plural(a,"prvek","prvky","prvků"),this.argValue.length]));case"Number":if(isFinite(this.argValue)&&this.argValue<=a){return this}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' musí být číslo menší nebo rovno {1}, ale hodnota je {2}",[this.argName,a,this.argValue]));default:return this}};vizus.Argument.prototype.valid=function(a){switch(Object.prototype.toString.call(a)){case"[object Array]":if(a.indexOf(this.argValue)!=-1){return this}break;case"[object RegExp]":if(a.test(this.argValue)){return this}break;case"[object Undefined]":switch(this.argClass){case"Number":if(isFinite(this.argValue)){return this}break;default:return this}break;default:if(a===this.argValue){return this}break}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' musí mít hodnotu {1}, nikoliv {2}",[this.argName,vizus.debug.dump(a),vizus.debug.dump(this.argValue)]))};vizus.Argument.prototype.invalid=function(a){switch(Object.prototype.toString.call(a)){case"[object Array]":if(a.indexOf(this.argValue)==-1){return this}break;case"[object RegExp]":if(!a.test(this.argValue)){return this}break;default:if(a!==this.argValue){return this}break}throw new vizus.ArgumentError(vizus.text.format("Parametr '{0}' nesmí mít hodnotu {1}",[this.argName,vizus.debug.dump(a)]))};vizus.Argument.prototype.value=function(a){if(this.argValue===undefined||this.argValue===null){return a}else{return this.argValue}};if(vizus.config==undefined){vizus.config={}}if(typeof vizus.config.debug!="boolean"){vizus.config.debug=false}if(typeof vizus.config.maxDebugDumpLength!="number"){vizus.config.maxDebugDumpLength=10}if(typeof vizus.config.maxDebugDumpDepth!="number"){vizus.config.maxDebugDumpDepth=3}if(typeof vizus.config.inputClassOnValid!="string"){vizus.config.inputClassOnValid=""}if(typeof vizus.config.inputClassOnInvalid!="string"){vizus.config.inputClassOnInvalid="error"}if(typeof vizus.config.language!="string"){vizus.config.language="cs"}if(vizus.debug==undefined){vizus.debug={}}vizus.debug.dump=function(f,h){if(typeof h!=="number"){h=1}if(h>vizus.config.maxDebugDumpDepth){return"..."}switch(typeof f){case"undefined":return"undefined";case"string":return"'"+f.replace(/\'/,"'")+"'";case"number":return f.toString();case"boolean":return f?"true":"false";case"object":if(f===null){return"null"}var d=vizus.getClass(f);switch(d){case"Array":var a=[];for(var c=0;c<f.length&&c<vizus.config.maxDebugDumpLength;c++){a.push(vizus.debug.dump(f[c],h+1))}if(c+1==vizus.config.maxDebugDumpLength&&f.length>vizus.config.maxDebugDumpLength){a.push("...")}return"["+a.join(", ")+"]";case"RegExp":return f.toString();case"Date":return"<"+f.toString()+">";case"Object":var a=[];var b="";var c=0;try{for(b in f){if(f.hasOwnProperty(b)){a.push(b+": "+vizus.debug.dump(f[b],h+1));if(++c==vizus.config.maxDebugDumpLength){if(f.length>vizus.config.maxDebugDumpLength){a.push("...")}break}}}}catch(g){a.push("?")}return"{"+a.join(", ")+"}";default:return"{object "+d+"}"}case"function":return"<function>"}};vizus.debug.callstack=function(){try{throw new Error()}catch(h){if(!h.stack){return[]}var b=h.stack.split("\n");if(b[0]=="Error"){b.shift()}b.shift();if(b[b.length-1]==""){b.pop()}var g={};var d=arguments&&arguments.callee?arguments.callee:null;for(var f=0;f<b.length;f++){if((found=b[f].match(/^(\S+)@(.+?):(\d+)$/))){g={scope:found[1],file:found[2],line:found[3],column:0}}else{if((found=b[f].match(/^@(.+?):(\d+)$/))){g={scope:"global",file:found[1],line:found[2],column:0}}else{if((found=b[f].match(/^\s*(?:at )?(\w+) \((.+?):(\d+):(\d+)\)$/))){g={scope:found[1],file:found[2],line:found[3],column:found[4]}}else{if((found=b[f].match(/^\s*(?:at Global code |at )?\(?(.+?):(\d+):(\d+)\)?$/))){g={scope:"global",file:found[1],line:found[2],column:found[3]}}else{console.log("Neznámý formát zásobníku: '"+b[f]+"'");g={scope:"unknown",file:"unknown",line:0,column:0}}}}}g.name="";g.arguments=[];if(d&&d.arguments){g.name=d.name?d.name:(b[f-1]?b[f-1].scope:"unknown");for(var c=0;c<d.arguments.length;c++){g.arguments.push(d.arguments[c])}if(d.arguments.callee&&d.arguments.callee.caller){d=d.arguments.callee.caller}else{d=null}}b[f]=g}b.shift();return b}};vizus.debug.calling=function(f){if(typeof f!=="number"){f=0}var e=vizus.debug.callstack();var d=e[f+1]!=undefined?e[f+1]:null;var c=[];if(!d){return""}for(var b=0;b<d.arguments.length;b++){c.push(vizus.debug.dump(d.arguments[b]))}return"Calling "+d.name+"("+c.join(", ")+") at "+d.file+":"+d.line+":"+d.column};vizus.debug.source=function(c){if(typeof c!=="number"){c=0}var b=vizus.debug.callstack();var a=b[c]!=undefined?b[c]:null;if(!a){return""}return"Source "+a.scope+" at "+a.file+":"+a.line+":"+a.column};vizus.debug.backtrace=function(g){if(typeof g!=="number"){g=0}var b=vizus.debug.callstack();var f=[];if(!b){return""}for(var e=g+1;e<b.length;e++){if(b[e]==undefined){break}var d=[];for(var c=0;c<b[e].arguments.length;c++){d.push(vizus.debug.dump(b[e].arguments[c]))}f.push(b[e].name+"("+d.join(", ")+") at "+b[e].file+":"+b[e].line+":"+b[e].column)}return"Backtrace:\n "+f.join("\n ")};vizus.debug.showAppEvent=function(b){try{var a=vizus.dom.get("SystemEvents")}catch(c){var a=document.createElement("div");a.id="SystemEvents";a.className="system-events";if(!document.body){document.write("<body></body>")}document.body.appendChild(a);a.innerHTML='<a href="javascript:vizus.debug.hideAppEvents()" class="hide"></a>'}a.innerHTML+=b};vizus.debug.hideAppEvents=function(){vizus.dom.hide("SystemEvents")};if(vizus.url==undefined){vizus.url={}}vizus.url.fix=function(a,b){(new vizus.Argument(a,"url")).type("String");b=(new vizus.Argument(b,"protocol")).type(["String","Undefined","Null"]).min(1).value("http");if(!a.match(/([a-z0-9]+:\/\/)?(([a-z0-9-]+\.){1,}[a-z]{2,})(\/?)([^ ]*)/i)){throw new vizus.Error("URL nelze opravit")}a=(RegExp.$1.length==0?b+"://":RegExp.$1)+RegExp.$2.toLowerCase()+"/"+RegExp.$5;if(a.indexOf("%")==-1){a=encodeURI(a)}return a};vizus.url.replace=function(b,j){(new vizus.Argument(b,"url")).type("String");j=(new vizus.Argument(j,"components")).type(["Object","Undefined","Null"]).value({});var e=b.match(/^(?:(\w+):\/\/)?([\w\.-]+?)?(?::(\d+))?(\/.*?)?(?:\?(.*?))?(?:#(.*))?$/i)||[];var m=(new vizus.Argument(j.protocol,"components.protocol")).type(["String","Undefined","Null"]).value(e[1]||"");var n=(new vizus.Argument(j.host,"components.host")).type(["String","Undefined","Null"]).value(e[2]||"");var c=(new vizus.Argument(j.port,"components.port")).type(["String","Number","Undefined","Null"]).value(e[3]||"").toString();var o=(new vizus.Argument(j.path,"components.path")).type(["String","Undefined","Null"]).value(decodeURI(e[4]||""));var k=decodeURI(e[5]||"");var h=(new vizus.Argument(j.hash,"components.hash")).type(["String","Undefined","Null"]).value(decodeURIComponent(e[6]||""));j.query=(new vizus.Argument(j.query,"components.query")).type(["Object","Undefined","Null"]).value({});var g=[];if(k!=""){k=k.split("&");for(var f=0;f<k.length;f++){var d=k[f].split("=");var a=decodeURIComponent(d[0]);var l=decodeURIComponent(d[1]);if(typeof(j.query[a])=="undefined"){g.push(encodeURIComponent(a)+"="+encodeURIComponent(l))}}}for(var a in j.query){if(j.query[a]!==null){if(typeof(j.query[a])!="string"&&typeof(j.query[a])!="number"){throw new vizus.ArgumentError("Parametr components.query."+a+" musí být typu string, number nebo null")}g.push(encodeURIComponent(a)+"="+encodeURIComponent(j.query[a]))}}var b="";if(m!=""){b+=m+"://"}if(n!=""){b+=n}if(c!=""&&c!="0"){b+=":"+c}if(o!=""){b+=encodeURI(o)}else{if(n!=""){b+="/"}}if(g.length>0){b+="?"+g.join("&")}if(h!=""){b+="#"+encodeURIComponent(h)}return b};vizus.url.make=function(a){return vizus.url.replace("",a)};vizus.url.build=function(f,b,a,e,c,d){return vizus.url.replace("",{protocol:f,host:b,port:a,path:e,query:c,hash:d})};vizus.url.full=function(a,b){(new vizus.Argument(a,"url")).type("String");b=(new vizus.Argument(b,"context")).type(["Window","Undefined","Null"]).value(window);var e=b.document.location.protocol;var c=b.document.location.host;var d=b.document.location.pathname;if(/^\w+:/.test(a)){return a}else{if(/^\/{2}/.test(a)){return e+a}else{if(/^\/{1}/.test(a)){return e+"//"+c+a}else{return e+"//"+c+d+a}}}};if(vizus.text==undefined){vizus.text={}}vizus.text.asciiMap=[["A",/[\u00C1\u00C4\u0104]/g],["C",/[\u010C\u0106]/g],["D",/[\u010E]/g],["E",/[\u00C9\u011A\u0118]/g],["I",/[\u00CD]/g],["L",/[\u0139\u013D\u0141]/g],["N",/[\u0147\u0143]/g],["O",/[\u00D3\u00D6]/g],["R",/[\u0158]/g],["S",/[\u0160\u015A]/g],["T",/[\u0164]/g],["U",/[\u00DA\u016E\u00DC]/g],["Y",/[\u00DD]/g],["Z",/[\u017D\u0179\u017B]/g],["a",/[\u00E1\u00E4\u0105]/g],["c",/[\u010D\u0107]/g],["d",/[\u010F]/g],["e",/[\u00E9\u011B\u0119]/g],["i",/[\u00ED]/g],["l",/[\u013A\u013E\u0142]/g],["n",/[\u0148\u0144]/g],["o",/[\u00F3\u00F6]/g],["r",/[\u0159]/g],["s",/[\u0161\u015B]/g],["t",/[\u0165]/g],["u",/[\u00FA\u016F\u00FC]/g],["y",/[\u00FD]/g],["z",/[\u017E\u017A\u017C]/g]];vizus.text.ascii=function(c){(new vizus.Argument(c,"text")).type("String");var b=vizus.text.asciiMap;for(var a=0;a<b.length;a++){c=c.replace(b[a][1],b[a][0])}return c};vizus.text.plural=function(d,c,b,a){if(d==0){return a}else{if(d==1){return c}else{if(d<5){return b}else{return a}}}};vizus.text.format=function(d,a){if(typeof d!="string"||d==""){return""}if(typeof a!="object"||!a){return d}var c=d.match(/\{(\d+)\}/g);if(c){for(var b=0;b<c.length;b++){if(a[c[b][1]]!=undefined){d=d.replace(new RegExp("\\{"+c[b][1]+"\\}","g"),a[c[b][1]])}}}return d};vizus.text.ident=function(a){return vizus.text.ascii(a).replace(/[^A-Za-z0-9]+/g,"-").replace(/^-|-$/g,"").replace(/-{2,}/g,"-").toLowerCase()};vizus.text.password=function(a){a=(new vizus.Argument(a,"strength")).type(["Number","Undefined","Null"]).valid([1,2,3,undefined,null]).value(2);var b="BCDFGHJKLMNPQRSTVXZ";var f="aeiou";var d=f.length-1;var e="bcdfghjklmnpqrstvxz";var k=e.length-1;var j=1;var l="";if(a==1){var g=0,i=5,h=1,c=9}else{if(a==2){var g=1,i=4,h=100,c=999}else{var g=1,i=6,h=1000,c=9999}}if(g){l=b.substr(vizus.number.random(0,b.length-1),1);j=2}while(1){if(j<=g+i){if(j%2==0){l+=f.substr(vizus.number.random(0,d),1)}else{l+=e.substr(vizus.number.random(0,k),1)}}else{l+=vizus.number.random(h,c).toString();break}j++}return l};vizus.text.decrypt=function(h,c){(new vizus.Argument(h,"text")).type("String");c=(new vizus.Argument(c,"password")).type(["String","Undefined","Null"]).min(5).value("W8nkRZ57");var f=0,e,b,d;var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~%";var a="";for(d=0;d<h.length;d++){e=h.charAt(d);b=g.indexOf(e)-g.indexOf(c.charAt(f));if(++f==c.length){f=0}if(b<0){b+=g.length}a+=g.charAt(b)}return decodeURIComponent(a)};vizus.text.pad=function(f,c,e){f=(new vizus.Argument(f,"text")).type(["String","Number"]).value().toString();c=(new vizus.Argument(c,"length")).type(["Number","Undefined","Null"]).value(0);if(typeof e=="string"){(new vizus.Argument(e,"padding")).type("String").min(1).max(1)}else{if(typeof e=="number"){e=(new vizus.Argument(e,"padding")).min(0).max(9).value().toString()}else{e=" "}}var d=Math.abs(c)-f.length;if(c==0||d<1){return f}else{var a=new Array(d);for(var b=0;b<d;b++){a[b]=e}if(c>0){return a.join("")+f}else{return f+a.join("")}}};if(vizus.number==undefined){vizus.number={}}vizus.number.random=function(b,a){(new vizus.Argument(b,"min")).type("Number").valid();(new vizus.Argument(a,"max")).type("Number").valid().min(b);return Math.round(Math.random()*(a-b)+b)};vizus.number.round=function(c,a){(new vizus.Argument(c,"number")).type("Number").valid();a=(new vizus.Argument(a,"decimals")).type(["Number","Undefined","Null"]).valid().min(0).value(0);var b=Math.pow(10,a);return Math.round(c*b)/b};vizus.number.format=function(e,c,a,m){(new vizus.Argument(e,"number")).type("Number").valid();c=(new vizus.Argument(c,"decimals")).type(["Number","Undefined","Null"]).valid().min(0).value(0);a=(new vizus.Argument(a,"decimalPoint")).type(["String","Undefined","Null"]).value(",");m=(new vizus.Argument(m,"thousandsSeparator")).type(["String","Undefined","Null"]).value(" ");var d="";var f="";if(c>0){var h=Math.pow(10,c);e=Math.round(e*h)/h;e=e.toString();var l=e.indexOf(".");if(l>-1){d=e.substr(0,l);f=e.substring(l+1,l+1+c)}else{d=e}while(f.length<c){f+="0"}}else{d=Math.round(e).toString()}if(m.length>0&&d.length>3){var b=[];var k=d.length%3;var j=Math.floor(d.length/3);if(k>0){b[0]=d.substr(0,k)}for(var g=0;g<j;g++){b.push(d.substr(g*3+k,3))}d=b.join(m)}if(c>0){return d+a+f}else{return d}};vizus.number.isValid=function(f,b,d,e,a,h){f=(new vizus.Argument(f,"number")).type(["String","Number"]).valid().value().toString();b=(new vizus.Argument(b,"decimals")).type(["Number","Undefined","Null"]).valid().min(0).value(0);d=(new vizus.Argument(d,"negative")).type(["Boolean","Undefined","Null"]).value(false);e=(new vizus.Argument(e,"min")).type(["Number","Undefined","Null"]).valid().value(null);a=(new vizus.Argument(a,"max")).type(["Number","Undefined","Null"]).valid().value(null);h=(new vizus.Argument(h,"multiplier")).type(["Number","Undefined","Null"]).invalid(0).value(null);var c=f.replace(/,/,".").replace(/\s+/g,"");var g=new RegExp("^"+(d?"-?":"")+"\\d+"+(b>0?"(\\.\\d{1,"+b+"}|)":"")+"$");if(!g.test(c)){return false}f=parseFloat(c);if(!isFinite(f)){return false}if(e!==null&&f<e){return false}if(a!==null&&f>a){return false}if(h!==null&&f%h>0){return false}return true};vizus.number.parseInt=function(b,a){(new vizus.Argument(b,"number")).type("String");a=Math.round((new vizus.Argument(a,"defaultValue")).type(["Number","Undefined","Null"]).valid().value(0));b=b.replace(/^\s+|\s+$/g,"").replace(/ +/g,"");b=parseInt(b,10);if(!isFinite(b)){return a}else{return b}};vizus.number.parseFloat=function(b,a){(new vizus.Argument(b,"number")).type("String");a=(new vizus.Argument(a,"defaultValue")).type(["Number","Undefined","Null"]).valid().value(0);b=b.replace(/^\s+|\s+$/g,"").replace(/ +/g,"").replace(/,/,".");b=parseFloat(b);if(!isFinite(b)){return a}else{return b}};vizus.number.pad=function(b,a){b=(new vizus.Argument(b,"number")).type(["Number","String"]).valid().value().toString();a=(new vizus.Argument(a,"length")).type(["Number","Undefined","Null"]).value(0);var c=a-b.length;if(a==0||c<1){return b}else{return"00000000000000000000000000000000".substr(0,c)+b}};if(vizus.event==undefined){vizus.event={}}vizus.event.keys={keyEnter:13,keyEsc:27,keyPageUp:33,keyPageDown:34,keyInsert:45,keyDelete:46,keyHome:36,keyEnd:35,keyUp:38,keyDown:40,keyLeft:37,keyRight:39,keyBackspace:8,keySpace:32};vizus.event.stop=function(b,a){(new vizus.Argument(b,"event")).type(/^(\w*Event|Undefined|Null)$/);a=(new vizus.Argument(a,"context")).type(["Window","Undefined","Null"]).value(window);if(b.cancelBubble!=undefined){b.cancelBubble=true}if(b.cancel!=undefined){b.cancel=true}if(typeof b.stopPropagation=="function"){b.stopPropagation()}if(typeof b.stopImmediatePropagation=="function"){b.stopImmediatePropagation()}if(typeof b.preventDefault=="function"){b.preventDefault()}else{if(a.event!=undefined){a.event.cancelBubble=true;a.event.returnValue=false}}};vizus.event.keyCode=function(b,a){(new vizus.Argument(b,"event")).type(/^(\w*Event|Undefined|Null)$/);a=(new vizus.Argument(a,"context")).type(["Window","Undefined","Null"]).value(window);if(b!=undefined&&b.keyCode!=undefined){return b.keyCode}else{if(a.event!=undefined&&a.event.keyCode!=undefined){return a.event.keyCode}else{return 0}}};vizus.event.keyChar=function(b,a){(new vizus.Argument(b,"event")).type(/^(\w*Event|Undefined|Null)$/);a=(new vizus.Argument(a,"context")).type(["Window","Undefined","Null"]).value(window);if(b!=undefined&&b.which!=undefined){return String.fromCharCode(b.which).toUpperCase()}else{if(b!=undefined&&b.charCode!=undefined){return String.fromCharCode(b.charCode).toUpperCase()}else{if(a.event!=undefined&&a.event.keyCode!=undefined){return String.fromCharCode(a.event.keyCode).toUpperCase()}else{return""}}}};vizus.event.onlyKeyChars=function(d,c,a){(new vizus.Argument(c,"chars")).type("String").min(1);var b=vizus.event.keyChar(d,a);if(b.charCodeAt(0)>0&&c.indexOf(b)<0){vizus.event.stop(d,a)}};vizus.event.onlyKeyNumber=function(c,a){var b=vizus.event.keyChar(c,a);if(b.charCodeAt(0)>0&&"0123456789".indexOf(b)<0){vizus.event.stop(c,a)}};vizus.event.clipboard=function(b,a){(new vizus.Argument(b,"event")).type(/^(\w*Event|Undefined|Null)$/);a=(new vizus.Argument(a,"context")).type(["Window","Undefined","Null"]).value(window);if(b!=undefined&&b.clipboardData!=undefined&&b.clipboardData.getData!=undefined){return b.clipboardData.getData("text/plain")}else{if(a.clipboardData!=undefined&&a.clipboardData.getData!=undefined){return a.clipboardData.getData("Text")}else{return""}}};if(vizus.window==undefined){vizus.window={}}vizus.window.create=function(a,b,i,j,c){a=(new vizus.Argument(a,"url")).type(["String","Undefined","Null"]).value("");b=(new vizus.Argument(b,"width")).type(["Number","Undefined","Null"]).min(100).value(300);i=(new vizus.Argument(i,"height")).type(["Number","Undefined","Null"]).min(100).value(300);c=(new vizus.Argument(c,"context")).type(["Window","Undefined","Null"]).value(window);if(j==undefined){j={left:Math.round(c.screen.availWidth/2-b/2),top:Math.round(c.screen.availHeight/2-i/2),parent:window,scrollbars:true,resizable:true,target:"_blank"}}else{if(typeof j==="object"){var h={left:0,top:0,width:c.screen.availWidth,height:c.screen.availHeight};if(j.parent==undefined){j.parent=c}else{if(typeof j.parent!=="object"){throw new vizus.ArgumentError("Parametr 'options.parent' musí být typu object nebo undefined")}if(j.parent.screenX!=undefined&&j.parent.screenY!=undefined&&j.parent.outerWidth!=undefined&&j.parent.outerHeight!=undefined){h={left:j.parent.screenX,top:j.parent.screenY,width:j.parent.outerWidth,height:j.parent.outerHeight}}}j.left=(new vizus.Argument(j.left,"options.left")).type(["Number","Undefined","Null"]).min(0).value(Math.round(h.width/2-b/2+h.left));j.top=(new vizus.Argument(j.top,"options.top")).type(["Number","Undefined","Null"]).min(0).value(Math.round(h.height/2-i/2+h.top));j.scrollbars=(new vizus.Argument(j.scrollbars,"options.scrollbars")).type(["Boolean","Undefined","Null"]).value(true);j.resizable=(new vizus.Argument(j.resizable,"options.resizable")).type(["Boolean","Undefined","Null"]).value(true);j.target=(new vizus.Argument(j.target,"options.target")).type(["String","Undefined","Null"]).value("_blank")}else{throw new vizus.ArgumentError("Parametr 'options' musí být typu object nebo undefined nebo null")}}var d="left="+j.left+", top="+j.top+", width="+b+", height="+i+", channelmode=no, directories=no, fullscreen=no, menubar=no, resizable="+(j.resizable?"yes":"no")+", scrollbars="+(j.scrollbars?"yes":"no")+", status=no, toolbar=no";var f=j.parent.open(a,j.target,d);if(!f){alert("Vyskakovací okno bylo zablokováno prohlížečem.");return null}try{f.innerWidth=b;f.innerHeight=i}catch(g){}return f};vizus.window.open=function(c,e,a,b,d){vizus.window.create(c,e,a,b,d)};vizus.window.centre=function(c,b){c=(new vizus.Argument(c,"win")).type(["Window","Undefined","Null"]).value(window);b=(new vizus.Argument(b,"context")).type(["Window","Undefined","Null"]).value(null);if(!(c.outerWidth!=undefined&&c.outerHeight!=undefined&&c.moveTo!=undefined)){return false}if(b!=undefined&&b.screenX!=undefined&&b.screenY!=undefined&&b.innerWidth!=undefined&&b.innerHeight!=undefined){var a=Math.round(b.screenX+b.innerWidth/2-c.outerWidth/2);var d=Math.round(b.screenY+b.innerHeight/2-c.outerHeight/2)}else{var a=Math.round(c.screen.availWidth/2-c.outerWidth/2);var d=Math.round(c.screen.availHeight/2-c.outerHeight/2)}c.moveTo(a,d);return true};if(vizus.page==undefined){vizus.page={}}vizus.page.redirect=function(a,b){(new vizus.Argument(a,"url")).type(["String","Object"]);b=(new vizus.Argument(b,"context")).type(["Window","Undefined","Null"]).value(window);if(typeof a!=="string"){a=vizus.url.replace(b.document.location.toString(),a)}b.document.location=a};vizus.page.reload=function(a){a=(new vizus.Argument(a,"context")).type(["Window","Undefined","Null"]).value(window);a.document.location.reload()};vizus.page.ready=function(f,b){(new vizus.Argument(f,"callback")).type("Function");b=(new vizus.Argument(b,"context")).type(["Window","Undefined","Null"]).value(window);if(b.jQuery!=undefined){b.jQuery(b.document).ready(f);return}if(b.vizus==undefined){b.vizus={page:{readyCallbacks:[]}}}else{if(b.vizus.page==undefined){b.vizus.page={readyCallbacks:[]}}else{if(b.vizus.page.readyCallbacks==undefined){b.vizus.page.readyCallbacks=[]}}}b.vizus.page.readyCallbacks.push(f);if(b.vizus.page.readyCallbacks.length==1){var d=false;function e(){if(!d){d=true;for(var g=0;g<b.vizus.page.readyCallbacks.length;g++){b.vizus.page.readyCallbacks[g]()}}}if(b.document.addEventListener!=undefined){b.document.addEventListener("DOMContentLoaded",e,false)}else{if(b.document.attachEvent!=undefined){if(b.document.documentElement.doScroll!=undefined&&b.frameElement==undefined){function a(){if(d){return}try{b.document.documentElement.doScroll("left");e()}catch(g){b.setTimeout(a,10)}}a()}b.document.attachEvent("onreadystatechange",function(){if(b.document.readyState==="complete"){e()}})}}if(b.addEventListener!=undefined){b.addEventListener("load",e,false)}else{if(b.attachEvent!=undefined){b.attachEvent("onload",e)}else{if(b.onload!=null){var c=b.onload;b.onload=function(){c();e()}}else{b.onload=e}}}}};vizus.page.writeProtectedLink=function(a,b,c){c=(new vizus.Argument(c,"context")).type(["Window","Undefined","Null"]).value(window);c.document.write('<a href="'+vizus.text.decrypt(a)+'">'+vizus.text.decrypt(b)+"</a>")};vizus.page.addJs=function(k,o,b){(new vizus.Argument(k,"urls")).type(["String","Array"]).min(1);(new vizus.Argument(o,"callback")).type(["Function","Undefined","Null"]);b=(new vizus.Argument(b,"context")).type(["Window","Undefined","Null"]).value(window);if(typeof k=="string"){k=[k]}var e=b.document.getElementsByTagName("SCRIPT");var g=0;var d=k.length;function j(){if(++g==d){o()}}function c(i){return function(){if(i.readyState=="loaded"||i.readyState=="complete"){i.onreadystatechange=null;i.vizusPageAddJsLoaded=true;j()}}}function p(i){return function(){i.vizusPageAddJsLoaded=true;j()}}function m(i){var q=function(){if(i.vizusPageAddJsLoaded===false){b.setTimeout(q,50)}else{j()}};return q}forscripts:for(var n=0;n<k.length;n++){var a=k[n];var h=vizus.url.full(a);for(var f=0;f<e.length;f++){if(e[f].src==h){if(o){if(e[f].vizusPageAddJsLoaded===false){b.setTimeout(m(e[f]),50)}else{j()}}continue forscripts}}var l=b.document.createElement("SCRIPT");l.type="text/javascript";l.vizusPageAddJsLoaded=false;if(o){if(l.readyState){l.onreadystatechange=c(l)}else{l.onload=p(l)}}l.src=a;b.document.body.appendChild(l)}};vizus.page.addCss=function(j,n,b){(new vizus.Argument(j,"urls")).type(["String","Array"]).min(1);(new vizus.Argument(n,"callback")).type(["Function","Undefined","Null"]);b=(new vizus.Argument(b,"context")).type(["Window","Undefined","Null"]).value(window);if(typeof j=="string"){j=[j]}var o=b.document.getElementsByTagName("LINK");var f=0;var d=j.length;function h(){if(++f==d){n()}}function c(i){return function(){if(i.readyState=="loaded"||i.readyState=="complete"){i.onreadystatechange=null;i.vizusPageAddCssLoaded=true;h()}}}function p(i){return function(){i.vizusPageAddCssLoaded=true;h()}}function l(q){var i=function(){if(q.vizusPageAddCssLoaded===false){b.setTimeout(i,50)}else{h()}};return i}forlinks:for(var m=0;m<j.length;m++){var a=j[m];var g=vizus.url.full(a);for(var e=0;e<o.length;e++){if(o[e].href==g){if(n){if(o[e].vizusPageAddCssLoaded===false){b.setTimeout(l(o[e]),50)}else{h()}}continue forlinks}}var k=b.document.createElement("LINK");k.type="text/css";k.rel="stylesheet";k.vizusPageAddCssLoaded=false;if(n){if(k.readyState){k.onreadystatechange=c(k)}else{k.onload=p(k)}}k.href=a;b.document.head.appendChild(k)}};if(vizus.dom==undefined){vizus.dom={}}vizus.dom.isTag=function(b,c){var a=Object.prototype.toString.call(b).match(/object HTML\w+Element/);if(!a||b.tagName==undefined){return false}a=b.tagName.toUpperCase();switch(Object.prototype.toString.call(c)){case"[object Undefined]":case"[object Null]":return true;case"[object String]":return c==a;case"[object Array]":return c.indexOf(a)!=-1;case"[object RegExp]":return c.test(a);default:return false}};vizus.dom.get=function(c,a,b){(new vizus.Argument(c,"element")).type(/^(String|HTML\w+Element)$/);(new vizus.Argument(a,"tag")).type(["String","Array","RegExp","Undefined","Null"]);b=(new vizus.Argument(b,"context")).type(["Window","Undefined","Null"]).value(window);if(typeof c==="string"){var d=b.document.getElementById(c);if(!vizus.dom.isTag(d,a)){throw new vizus.ReferenceError("Element s ID '"+c+"' nebyl nalezen")}return d}else{if(!vizus.dom.isTag(c,a)){throw new vizus.ReferenceError("Element není typu "+vizus.debug.dump(a))}}return c};vizus.dom.addClass=function(c,a){c=vizus.dom.get(c);(new vizus.Argument(a,"name")).type("String").min(1);if(typeof c.className!=="string"){return}var f=a.trim().split(/\s+/);if(c.className===""){c.className=f.join(" ")}else{var e=c.className.trim().split(/\s+/);var d=[];for(var b=0;b<f.length;b++){if(e.indexOf(f[b])<0){d.push(f[b])}}if(d.length>0){c.className=e.join(" ")+" "+d.join(" ")}}};vizus.dom.removeClass=function(d,b){d=vizus.dom.get(d);(new vizus.Argument(b,"name")).type("String").min(1);if(typeof d.className!=="string"||d.className===""){return}var g=b.trim().split(/\s+/);var f=d.className.trim().split(/\s+/);var a=[];for(var c=0;c<f.length;c++){if(g.indexOf(f[c])<0){a.push(f[c])}}var e=a.join(" ");if(e!=d.className){d.className=e}};vizus.dom.hide=function(e,c,f,b,a){e=vizus.dom.get(e);c=(new vizus.Argument(c,"disable")).type(["Boolean","Undefined","Null"]).value(false);f=(new vizus.Argument(f,"unset")).type(["Boolean","Undefined","Null"]).value(false);b=(new vizus.Argument(b,"recursive")).type(["Boolean","Undefined","Null"]).value(true);a=(new vizus.Argument(a,"inner")).type(["Boolean","Undefined","Null"]).value(false);if(b&&e.children!=undefined&&e.children.length>0){for(var d=0;d<e.children.length;d++){if(e.children[d].children){vizus.dom.hide(e.children[d],c,f,b,true)}}}if(!a&&typeof e.style=="object"){e.style.display="none"}if(e.tagName=="INPUT"||e.tagName=="TEXTAREA"||e.tagName=="SELECT"){if(c){e.disabled=true}if(f){e.vizusDomHideValue=e.value.toString();e.value=""}}};vizus.dom.show=function(e,c,f,b,a){e=vizus.dom.get(e);c=(new vizus.Argument(c,"enable")).type(["Boolean","Undefined","Null"]).value(false);f=(new vizus.Argument(f,"restore")).type(["Boolean","Undefined","Null"]).value(false);b=(new vizus.Argument(b,"recursive")).type(["Boolean","Undefined","Null"]).value(true);a=(new vizus.Argument(a,"inner")).type(["Boolean","Undefined","Null"]).value(false);if(b&&e.children!=undefined&&e.children.length>0){for(var d=0;d<e.children.length;d++){if(e.children[d].children){vizus.dom.show(e.children[d],c,f,b,true)}}}if(!a&&typeof e.style=="object"){e.style.display=""}if(e.tagName=="INPUT"||e.tagName=="TEXTAREA"||e.tagName=="SELECT"){if(c){e.disabled=false}if(f&&e.vizusDomHideValue!=undefined){e.value=e.vizusDomHideValue;e.vizusDomHideValue=undefined}}};vizus.dom.add=function(a,b){a=vizus.dom.get(a);b=vizus.dom.get(b);b.insertBefore(a,null);return a};vizus.dom.remove=function(a){a=vizus.dom.get(a);a.parentNode.removeChild(a);return a};vizus.dom.moveBy=function(d,b){d=vizus.dom.get(d);(new vizus.Argument(b,"shift")).type("Number");var e=d.parentNode;var c=Array.prototype.indexOf.call(e.childNodes,d);if(b>0){b++;var f=d;var a=0;while(a<b&&(f=f.nextSibling)){if(f.nodeType==1){a++}}e.insertBefore(d,f)}else{if(b<0){var f=d;var a=0;while(a>b&&f.previousSibling){f=f.previousSibling;if(f.nodeType==1){a--}}e.insertBefore(d,f)}}return d};vizus.dom.moveTo=function(d,a){d=vizus.dom.get(d);(new vizus.Argument(a,"position")).type("Number");var e=d.parentNode;var c=Array.prototype.indexOf.call(e.childNodes,d);if(a>=e.childNodes.length-1){e.insertBefore(d,null)}else{if(a==0){e.insertBefore(d,e.firstChild)}else{if(a>0){var f=e.firstChild;var b=0;while(f){if(f!==d&&f.nodeType==1){b++}if(b==a+1){break}f=f.nextSibling}e.insertBefore(d,f)}else{a=Math.abs(a)-1;var f=e.lastChild;var b=0;while(f&&f.previousSibling){if(f!==d&&f.nodeType==1){b++}if(b==a){break}f=f.previousSibling}e.insertBefore(d,f)}}}return d};vizus.dom.css=function(b,a,c){b=vizus.dom.get(b);(new vizus.Argument(a,"name")).type(["String","Object"]);(new vizus.Argument(c,"value")).type(["String","Number","Undefined"]);if(typeof a=="string"){a=a.replace(/[A-Z]/,function(e){return"-"+e[0].toLowerCase()});if(c==undefined){if(b.currentStyle){c=b.currentStyle[a]}else{if(window.getComputedStyle){c=window.getComputedStyle(b,null).getPropertyValue(a)}else{c=null}}if(/^\d+px$/.test(c)){return parseInt(c,10)}else{return c}}else{if(typeof c=="number"){c=c+"px"}b.style[a]=c}}else{for(var d in a){d=d.replace(/[A-Z]/,function(e){return"-"+e[0].toLowerCase()});c=typeof a[d]=="number"?a[d]+"px":a[d];b.style[d]=c}}};if(vizus.browser==undefined){vizus.browser={}}vizus.browser.isFirefox=/firefox/i.test(window.navigator.userAgent);if(vizus.input==undefined){vizus.input={}}vizus.input.focus=function(e,g,f,d){e=(new vizus.Argument(e,"element")).type(["Number","Undefined","Null"]).invalid(0).value(1);g=(new vizus.Argument(g,"form")).type(["Number","Undefined","Null"]).invalid(0).value(1);f=(new vizus.Argument(f,"ready")).type(["Boolean","Undefined","Null"]).value(false);d=(new vizus.Argument(d,"context")).type(["Window","Undefined","Null"]).value(window);if(!f){vizus.page.ready(function(){vizus.input.focus(e,g,true,d)});return}if(d.document.forms.length==0||d.document.forms.length<Math.abs(g)){return false}if(g>0){g=d.document.forms[g-1]}else{g=d.document.forms[document.forms.length-g]}var b=0;var c=0;function a(){var i=g.elements[c];if(((i.tagName=="INPUT"&&(i.type=="text"||i.type=="password"))||i.tagName=="TEXTAREA"||i.tagName=="SELECT")&&i.style.display!="none"&&i.style.visibility!="hidden"){if(++b>=e){try{i.focus();if(d.document.activeElement!=undefined&&d.document.activeElement===i){return true}}catch(h){}}}return false}if(e>0){for(c=0;c<g.elements.length;c++){if(a()){return}}}else{e=Math.abs(e);for(c=g.elements.length-1;c>=0;c--){if(a()){return}}}};vizus.input.fill=function(a,b){a=vizus.dom.get(a,["INPUT","TEXTAREA"]);b=vizus.dom.get(b,["INPUT","TEXTAREA"]);if(a.value==""){a.value=b.value}};vizus.input.setValidity=function(a,b){a=vizus.dom.get(a,["INPUT","TEXTAREA"]);if(b){if(vizus.config.inputClassOnInvalid){vizus.dom.removeClass(a,vizus.config.inputClassOnInvalid)}if(vizus.config.inputClassOnValid){vizus.dom.addClass(a,vizus.config.inputClassOnValid)}}else{if(vizus.config.inputClassOnInvalid){vizus.dom.addClass(a,vizus.config.inputClassOnInvalid)}if(vizus.config.inputClassOnValid){vizus.dom.removeClass(a,vizus.config.inputClassOnValid)}}};if(vizus.input.text==undefined){vizus.input.text={}}vizus.input.text.validRegExp=/^(\S+|\S.+\S)$/;vizus.input.text.validate=function(b,a,c){b=vizus.dom.get(b,["INPUT","TEXTAREA"]);vizus.input.setValidity(b,vizus.input.text.isValid(b,a,c))};vizus.input.text.finish=function(b,a,c){b=vizus.dom.get(b,["INPUT","TEXTAREA"]);b.value=b.value.trim();vizus.input.text.validate(b,a,c)};vizus.input.text.isValid=function(b,a,c){b=vizus.dom.get(b,["INPUT","TEXTAREA"]);a=(new vizus.Argument(a,"minLength")).type(["Number","Undefined","Null"]).min(0).value(0);c=(new vizus.Argument(c,"regexp")).type(["RegExp","Undefined","Null"]).value(vizus.input.text.validRegExp);return b.value.length>=a&&(b.value.length==0||c.test(b.value))};vizus.input.text.trim=function(a){a=vizus.dom.get(a,["INPUT","TEXTAREA"]);a.value=a.value.trim()};if(vizus.input.phone==undefined){vizus.input.phone={}}vizus.input.phone.validRegExp=/^\d{4,9}$|^\d{3} \d{3} \d{3}$|^\+[1-9]\d{0,2} \d+$|^\+[1-9]\d{0,2}( \d{3})+$/;vizus.input.phone.validate=function(a){vizus.input.setValidity(a,vizus.input.phone.isValid(a))};vizus.input.phone.finish=function(a){a.value=a.value.toString().replace(/^(\+\d+)/,"$1_").replace(/\s+/g,"").replace(/(\d{3})/g,"$1_").replace(/_+/g," ").replace(/ +$/g,"").replace(/^(\d+)/,"+420 $1");vizus.input.phone.validate(a)};vizus.input.phone.isValid=function(a){return vizus.input.phone.validRegExp.test(a.value)};if(vizus.input.psc==undefined){vizus.input.psc={}}vizus.input.psc.validRegExp=/^\d{5}$|^\d{3} \d{2}$/;vizus.input.psc.validate=function(a){vizus.input.setValidity(a,this.isValid(a))};vizus.input.psc.finish=function(a){a.value=a.value.toString().replace(/\s+/g,"").replace(/^(\d{3})(\d{2})$/,"$1 $2");vizus.input.psc.validate(a)};vizus.input.psc.isValid=function(a){return vizus.input.psc.validRegExp.test(a.value)};if(vizus.input.ip==undefined){vizus.input.ip={}}vizus.input.ip.validRegExp=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;vizus.input.ip.validate=function(a){vizus.input.setValidity(a,vizus.input.ip.isValid(a))};vizus.input.ip.finish=function(a){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.ip.validate(a)};vizus.input.ip.isValid=function(g){if(g.value.toString().match(vizus.input.ip.validRegExp)==null){return false}var f=parseInt(RegExp.$1);var e=parseInt(RegExp.$2);var i=parseInt(RegExp.$3);var h=parseInt(RegExp.$4);return f<256&&e<256&&i<256&&h<256};if(vizus.input.domain==undefined){vizus.input.domain={}}vizus.input.domain.validRegExp=/^([a-z0-9-]+\.)+[a-z]{2,}$/;vizus.input.domain.invalidRegExp=/^-|--|\.-|-\./;vizus.input.domain.validate=function(a){vizus.input.setValidity(a,vizus.input.domain.isValid(a))};vizus.input.domain.finish=function(a){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.domain.validate(a)};vizus.input.domain.isValid=function(a){var b=a.value.toString();return b.match(vizus.input.domain.validRegExp)!=null&&b.match(vizus.input.domain.invalidRegExp)==null};if(vizus.input.number==undefined){vizus.input.number={}}vizus.input.number.validate=function(b,a,c,d,f,e){vizus.input.setValidity(b,vizus.input.number.isValid(b,a,c,d,f,e))};vizus.input.number.finish=function(b,a,c,d,g,f){if(!vizus.input.number.isValid(b,a,c,d,g,f)){return}var e=parseFloat(b.value.toString().replace(/[^\d,\.-]/g,"").replace(/,/g,"."));if(!isFinite(e)){return}b.value=vizus.number.format(e,a,","," ")};vizus.input.number.prepare=function(a){var b=a.value.toString().replace(/[^\d,\.-]/g,"").replace(/\./g,",");if(b!=a.value.toString()){a.value=b;a.select()}};vizus.input.number.isValid=function(h,b,d,e,a,i){var f=h.value.toString().replace(/,/g,".").replace(/ /g,"");var g="\\d+";if(isFinite(b)&&b){g+="(\\.\\d{1,"+b+"}|)"}if(d){g="-?"+g}g=new RegExp("^"+g+"$");if(f.match(g)==null){return false}var c=parseFloat(f);if(!isFinite(c)){return false}if(isFinite(e)&&c<e){return false}if(isFinite(a)&&c>a){return false}if(isFinite(i)&&c%i>0){return false}return true};if(vizus.input.email==undefined){vizus.input.email={}}vizus.input.email.validRegExp=/^[a-zA-Z0-9_\.-]{1,50}@([a-z0-9-]{1,63}\.){1,}[a-z]{2,}$/;vizus.input.email.validate=function(a){vizus.input.setValidity(a,vizus.input.email.isValid(a))};vizus.input.email.finish=function(a){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.email.validate(a)};vizus.input.email.isValid=function(a){return vizus.input.email.validRegExp.test(a.value)};if(vizus.input.url==undefined){vizus.input.url={}}vizus.input.url.validRegExp=/^([a-z0-9]+):\/\/(([a-z0-9-]+\.)+[a-z]{2,})(\/|\/.+|)$/;vizus.input.url.validSimpleRegExp=/^([a-z0-9-]+\.)+[a-z]{2,}(\/|\/.+|)$/;vizus.input.url.validate=function(a,b){vizus.input.setValidity(a,vizus.input.url.isValid(a,b))};vizus.input.url.finish=function(a,b){if(b==undefined){b="http"}a.value=a.value.toString().replace(/^\s+|\s+$/g,"");if(a.value.toString().match(vizus.input.url.validSimpleRegExp)!=null){a.value=b+"://"+a.value+(RegExp.$2.length==0?"/":"")}vizus.input.url.validate(a,b)};vizus.input.url.isValid=function(a,b){if(b==undefined){b=["http"]}else{if(!Array.isArray(b)){b=[b]}}return(vizus.input.url.validRegExp.test(a.value)&&b.indexOf(RegExp.$1)!=-1)||a.value.toString().match(vizus.input.url.validSimpleRegExp)!=null};vizus.input.url.fix=function(a,c){a=vizus.dom.get(a,["INPUT","TEXTAREA"]);try{a.value=vizus.url.fix(a.value,c);vizus.input.setValidity(a,true)}catch(b){vizus.input.setValidity(a,false)}};if(vizus.input.ident==undefined){vizus.input.ident={}}vizus.input.ident.validRegExp=/^[a-z][a-z0-9-]*[a-z0-9]$/;vizus.input.ident.validate=function(a){vizus.input.setValidity(a,vizus.input.ident.isValid(a))};vizus.input.ident.finish=function(a){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.ident.validate(a)};vizus.input.ident.prepare=function(a,b,c){if(a.value==""&&typeof(b)=="object"&&b.value!=undefined&&b.value!=""){a.value=vizus.text.ident(b.value.toString())+(c!=undefined?c:"");a.select()}vizus.input.ident.validate(a)};vizus.input.ident.isValid=function(a){return vizus.input.ident.validRegExp.test(a.value)};if(vizus.input.initials==undefined){vizus.input.initials={}}vizus.input.initials.validRegExp=/^[A-Z]+$/;vizus.input.initials.validate=function(a,b){vizus.input.setValidity(a,vizus.input.initials.isValid(a,b))};vizus.input.initials.finish=function(a,b){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.initials.validate(a,b)};vizus.input.initials.prepare=function(b,e,d){if(!isFinite(d)){d=2}if(b.value==""&&typeof(e)=="object"&&e.value!=undefined){var a=toAscii(e.value.toString().toUpperCase()).match(/\b[A-Z]/g);if(a!=null){var f=new Array();for(var c=0;c<d;c++){if(a[c]!=undefined){f.push(a[c])}}b.value=f.join("");b.select()}}this.validate(b,d)};vizus.input.initials.isValid=function(a,b){if(!isFinite(b)){b=2}return vizus.input.initials.validRegExp.test(a.value)&&a.value.length==b};if(vizus.input.ic==undefined){vizus.input.ic={}}vizus.input.ic.validRegExp=/^\d{4,}$/;vizus.input.ic.validate=function(a){vizus.input.setValidity(a,vizus.input.ic.isValid(a))};vizus.input.ic.finish=function(a){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.ic.validate(a)};vizus.input.ic.isValid=function(a){return vizus.input.ic.validRegExp.test(a.value)};if(vizus.input.dic==undefined){vizus.input.dic={}}vizus.input.dic.validRegExp=/^[A-Z]{2}\d{4,}$/;vizus.input.dic.validate=function(a){vizus.input.setValidity(a,this.isValid(a))};vizus.input.dic.finish=function(a){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.dic.validate(a)};vizus.input.dic.prepare=function(a,b){if(a.value==""&&typeof(b)=="object"&&b.value!=undefined&&b.value!=""){a.value="CZ"+b.value;a.select()}vizus.input.dic.validate(a)};vizus.input.dic.isValid=function(a){return vizus.input.dic.validRegExp.test(a.value)};if(vizus.input.login==undefined){vizus.input.login={}}vizus.input.login.validRegExp=/^[a-zA-Z0-9\._@-]{3,}$/;vizus.input.login.validate=function(a,b){vizus.input.setValidity(a,vizus.input.login.isValid(a,b))};vizus.input.login.finish=function(a,b){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.login.validate(a,b)};vizus.input.login.isValid=function(a,b){if(typeof(b)!="object"||b.constructor!=RegExp){b=vizus.input.login.validRegExp}return b.test(a.value)};if(vizus.input.password==undefined){vizus.input.password={}}vizus.input.password.validRegExp=/^[a-zA-Z0-9!@#\$%\^&\*\(\)\.+\-]{3,}$/;vizus.input.password.validate=function(a,b){vizus.input.setValidity(a,vizus.input.password.isValid(a,b))};vizus.input.password.finish=function(a,b){a.value=a.value.toString().replace(/^\s+|\s+$/g,"");vizus.input.password.validate(a,b)};vizus.input.password.generate=function(b,a){b.value=generatePassword(a);b.select();vizus.input.password.validate(b)};vizus.input.password.isValid=function(a,b){if(typeof(b)!="object"||b.constructor!=RegExp){var b=vizus.input.password.validRegExp}return b.test(a.value)};if(vizus.image==undefined){vizus.image={}}vizus.image.showbox=function(a){if(!vizus.isClassOf(a,"HTMLAnchorElement")||a.href==""){return}if(a.children.length!=1||!vizus.isClassOf(a.children[0],"HTMLImageElement")){return}a.onclick=function(){var e=document.createElement("iframe");var i=document.createElement("div");var l=document.createElement("div");var g=null;var c=null;var f=0;var o={};var m={left:0,top:0,width:0,height:0,margin:{top:0,right:0,bottom:0,left:0},border:{top:0,right:0,bottom:0,left:0},image:{width:0,height:0},wait:{width:0,height:0}};var n=function(){o.width=typeof window.innerWidth=="number"?window.innerWidth:window.availWidth;o.height=typeof window.innerHeight=="number"?window.innerHeight:window.availHeight};var b=function(r,q){m.width=r;m.height=q;m.left=Math.round((o.width-(m.width+m.border.left+m.border.right))/2-m.margin.left);m.top=Math.round((o.height-(m.height+m.border.top+m.border.bottom))/2-m.margin.top);vizus.dom.css(e,{width:m.width,height:m.height,left:m.left,top:m.top});if(g){vizus.dom.css(g,{width:m.width,height:m.height})}if(l){vizus.dom.css(l,{left:Math.round((o.width-m.wait.width)/2),top:Math.round((o.height-m.wait.height)/2)})}};var d=function(){n();var r=m.image.width;var q=m.image.height;var v=m.margin.left+m.margin.right+m.border.left+m.border.right;var u=m.margin.top+m.margin.bottom+m.border.top+m.border.bottom;if(r+v>o.width){var t=o.width-v;q=Math.round(q/(r/t));r=t}if(q+u>o.height){var s=o.height-u;r=Math.round(r/(q/s));q=s}b(r,q)};var p=function(){e.parentNode.removeChild(e);i.parentNode.removeChild(i);l.parentNode.removeChild(l)};var j=function(){if(!e.src){return}var q=e.contentWindow.document.body;vizus.dom.css(q,{margin:0,padding:0});vizus.dom.hide(l);window.clearInterval(c);if(q.children.length==1&&vizus.isClassOf(q.children[0],"HTMLImageElement")){g=q.children[0];g.title=a.children[0].alt||a.children[0].title;g.onclick=p;var r=new Image();r.src=g.src;m.image.width=g.naturalWidth||r.width;m.image.height=g.naturalHeight||r.height;d();if(window.onresize){var s=window.onresize}window.onresize=function(){d();s&&s()}}};var h=function(){f=f+10>360?0:f+10;var q="rotate("+f+"deg)";vizus.dom.css(l,{"-webkit-transform":q,"-moz-transform":q,"-o-transform":q,"-ms-transform":q,transform:q})};if(e.readyState){e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete"){e.onreadystatechange=null;j()}}}else{e.onload=j}document.body.appendChild(i);i.className="system-showbox-overlay";i.onclick=p;document.body.appendChild(e);e.className="system-showbox";e.src=a.href;document.body.appendChild(l);l.className="system-showbox-wait";c=window.setInterval(h,27);m.margin.top=vizus.dom.css(e,"margin-top");m.margin.right=vizus.dom.css(e,"margin-right");m.margin.bottom=vizus.dom.css(e,"margin-bottom");m.margin.left=vizus.dom.css(e,"margin-left");m.border.top=vizus.dom.css(e,"border-top-width");m.border.right=vizus.dom.css(e,"border-right-width");m.border.bottom=vizus.dom.css(e,"border-bottom-width");m.border.left=vizus.dom.css(e,"border-left-width");m.wait.width=vizus.dom.css(l,"width");m.wait.height=vizus.dom.css(l,"height");n();b(320,240);if(document.onkeydown){var k=document.onkeydown}document.onkeydown=function(q){if(vizus.event.keyCode(q)==vizus.event.keys.keyEsc){p()}k&&k()};return false}};vizus.image.showboxes=function(a){a=(new vizus.Argument(a,"selector")).type(["String","Undefined","Null"]).value("a.system-showbox");vizus.page.ready(function(){var b=document.querySelectorAll(a);for(var c=0;c<b.length;c++){vizus.image.showbox(b[c])}})};vizus.image.reload=function(a){a=vizus.dom.get(a,"IMG");a.src=vizus.url.replace(a.src,{query:{random:Math.round(Math.random()*1000000)}})};if(!vizus.i18n){vizus.i18n={}}vizus.i18n.texts={};vizus.i18n.text=function(a,b){if(b==undefined){b=vizus.config.language}return vizus.i18n.texts[b]!=undefined&&vizus.i18n.texts[b][a]!=undefined?vizus.i18n.texts[b][a]:a};vizus.i18n.addTexts=function(c,b){for(var a in b){if(vizus.i18n.texts[c]==undefined){vizus.i18n.texts[c]={}}vizus.i18n.texts[c][a]=b[a]}};