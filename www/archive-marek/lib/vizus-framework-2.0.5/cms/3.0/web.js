if(!vizus){throw new Error("ChybÃ­ system.js")}if(!vizus.cms){vizus.cms={}}if(!vizus.cms.config){vizus.cms.config={}}if(typeof vizus.cms.config.features!="object"){vizus.cms.config.features={imageViewer:"a.cms-editor-link-image",videoPlayer:"video.cms-player",audioPlayer:"audio.cms-player",linkDecoder:'a[data-vizus-cms-link-protected="1"]'}}vizus.cms.player=function(b){if(!vizus.isClassOf(b,["String","HTMLVideoElement","HTMLAudioElement"])){return}if(typeof videojs=="function"){videojs(b,{plugins:{VizusAddOns:{element:b}}})}else{var c=vizus.page.getJsUrl(/^(.+?\/cms\/3\.0\/)(web|cms)(\.src)?\.js/,1)+"player/";var a=1;vizus.page.addCss(c+"skin.css?version="+a);vizus.page.addJs(c+"vjs.js?version="+a,function(){vizus.page.addJs(c+"localize.js?version="+a,function(){videojs.options.flash.swf=c+"vjs.swf?version="+a;videojs.plugin("VizusAddOns",function(d){var i=this.controlBar.getChild("playToggle").el();var k=this.controlBar.getChild("remainingTimeDisplay").el();var g=this.controlBar.getChild("muteToggle").el();var f=this.currentSrc().match(/\.(\w{3,4})($|\?)/)[1];var h=document.createElement("div");h.className="vjs-control vjs-source-format";h.innerHTML=f?f.toUpperCase():"";k.parentNode.insertBefore(h,k);var j=document.createElement("div");j.className="vjs-control vjs-source-title";j.innerHTML=vizus.dom.get(d.element).getAttribute("title")||"";j.style.display="none";k.parentNode.insertBefore(j,k);function e(){j.style.display="none";var l=g.getBoundingClientRect();var o=h.getBoundingClientRect();var n=i.getBoundingClientRect();var m=l.left-o.right-30;if(m>20&&n.top==l.top){j.style.width=m+"px";j.style.display="block"}}this.on("resize",e);this.on("firstplay",e);this.on("fullscreenchange",e);e()});vizus.cms.player(b)})})}};vizus.cms.viewer=function(a){if(!vizus.isClassOf(a,"HTMLAnchorElement")||a.href==""){return}if(a.children.length!=1||!vizus.isClassOf(a.children[0],"HTMLImageElement")){return}a.onclick=function(){var e=document.createElement("iframe");var i=document.createElement("div");var l=document.createElement("div");var g=null;var c=null;var f=0;var o={};var m={left:0,top:0,width:0,height:0,margin:{top:0,right:0,bottom:0,left:0},border:{top:0,right:0,bottom:0,left:0},image:{width:0,height:0},wait:{width:0,height:0}};var n=function(){o.width=typeof window.innerWidth=="number"?window.innerWidth:window.availWidth;o.height=typeof window.innerHeight=="number"?window.innerHeight:window.availHeight};var b=function(r,q){m.width=r;m.height=q;m.left=Math.round((o.width-(m.width+m.border.left+m.border.right))/2-m.margin.left);m.top=Math.round((o.height-(m.height+m.border.top+m.border.bottom))/2-m.margin.top);vizus.dom.css(e,{width:m.width,height:m.height,left:m.left,top:m.top});if(g){vizus.dom.css(g,{width:m.width,height:m.height})}if(l){vizus.dom.css(l,{left:Math.round((o.width-m.wait.width)/2),top:Math.round((o.height-m.wait.height)/2)})}};var d=function(){n();var r=m.image.width;var q=m.image.height;var v=m.margin.left+m.margin.right+m.border.left+m.border.right;var u=m.margin.top+m.margin.bottom+m.border.top+m.border.bottom;if(r+v>o.width){var t=o.width-v;q=Math.round(q/(r/t));r=t}if(q+u>o.height){var s=o.height-u;r=Math.round(r/(q/s));q=s}b(r,q)};var p=function(){e.parentNode.removeChild(e);i.parentNode.removeChild(i);l.parentNode.removeChild(l)};var j=function(){if(!e.src){return}var q=e.contentWindow.document.body;vizus.dom.css(q,{margin:0,padding:0});vizus.dom.hide(l);window.clearInterval(c);if(q.children.length==1&&vizus.isClassOf(q.children[0],"HTMLImageElement")){g=q.children[0];g.title=a.children[0].alt||a.children[0].title;g.onclick=p;var r=new Image();r.src=g.src;m.image.width=g.naturalWidth||r.width;m.image.height=g.naturalHeight||r.height;d();if(window.onresize){var s=window.onresize}window.onresize=function(){d();s&&s()}}};var h=function(){f=f+10>360?0:f+10;var q="rotate("+f+"deg)";vizus.dom.css(l,{"-webkit-transform":q,"-moz-transform":q,"-o-transform":q,"-ms-transform":q,transform:q})};if(e.readyState){e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete"){e.onreadystatechange=null;j()}}}else{e.onload=j}document.body.appendChild(i);i.className="cms-viewer-overlay";i.onclick=p;document.body.appendChild(e);e.className="cms-viewer";e.src=a.href;document.body.appendChild(l);l.className="cms-viewer-wait";c=window.setInterval(h,27);m.margin.top=vizus.dom.css(e,"margin-top");m.margin.right=vizus.dom.css(e,"margin-right");m.margin.bottom=vizus.dom.css(e,"margin-bottom");m.margin.left=vizus.dom.css(e,"margin-left");m.border.top=vizus.dom.css(e,"border-top-width");m.border.right=vizus.dom.css(e,"border-right-width");m.border.bottom=vizus.dom.css(e,"border-bottom-width");m.border.left=vizus.dom.css(e,"border-left-width");m.wait.width=vizus.dom.css(l,"width");m.wait.height=vizus.dom.css(l,"height");n();b(320,240);if(document.onkeydown){var k=document.onkeydown}document.onkeydown=function(q){if(vizus.event.keyCode(q)==vizus.event.keys.keyEsc){p()}k&&k()};return false}};vizus.cms.decoder=function(a){if(!vizus.isClassOf(a,"HTMLAnchorElement")||a.href==""||a.getAttribute("data-vizus-cms-link-protected")!=1){return}a.href=vizus.text.decrypt(a.getAttribute("href"));vizus.dom.text(a,vizus.text.decrypt(vizus.dom.text(a)))};if(vizus.cms.config.features){var features=vizus.cms.config.features;vizus.page.ready(function(){features.imageViewer&&vizus.dom.apply(features.imageViewer,vizus.cms.viewer);features.videoPlayer&&vizus.dom.apply(features.videoPlayer,vizus.cms.player);features.audioPlayer&&vizus.dom.apply(features.audioPlayer,vizus.cms.player);features.linkDecoder&&vizus.dom.apply(features.linkDecoder,vizus.cms.decoder)})};